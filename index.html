<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Carbon Forest</title>
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
    />
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: "Pretendard", sans-serif;
        color: #333;
        overflow-x: hidden; /* ì‚¬ìŠ´ì´ ë§ˆì§„ ì˜ì—­ ë°–ì—ì„œ ë‚˜ì˜¬ ë•Œ ìŠ¤í¬ë¡¤ë°” ë°©ì§€ */
      }
      body {
        /* ë°°ê²½ ê³ ì • */
        background-attachment: fixed;
        transition: background-image 0.5s ease-in-out;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("1.jpg");
        position: relative;
        /* comparison-dataì™€ footer ê³µê°„ í™•ë³´ */
        padding-bottom: 120px;
        box-sizing: border-box;
      }
      .container {
        display: flex;
        width: 100%;
        height: 100%;
        padding: 60px; /* ì „ì²´ ì»¨í…Œì´ë„ˆ ì¢Œìš° íŒ¨ë”© */
        padding-top: 90px;
        box-sizing: border-box;
        position: relative;
        align-items: flex-start; /* ìƒë‹¨ ì •ë ¬ */
      }
      .title-container {
        flex-basis: 60%; /* íƒ€ì´í‹€ êµ¬ì—­ì„ 60%ë¡œ í™•ì¥ */
        display: flex;
        flex-direction: column;
        justify-content: flex-start; /* ìƒë‹¨ ì •ë ¬ */
        align-items: flex-start;
        box-sizing: border-box;
        position: relative; /* z-indexë¥¼ ì ìš©í•˜ë ¤ë©´ í•„ìš” */
        z-index: 10; /* image-overlayë³´ë‹¤ ë†’ì€ ê°’ ì„¤ì • */
      }
      .title-text {
        font-size: 130px;
        font-weight: 700;
        color: white;
        text-align: left;
        word-break: keep-all;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        margin: 0 0 20px 0;
        line-height: 110%;
        letter-spacing: -0.02em;
      }
      .title-description {
        font-size: 20px;
        font-weight: 400;
        line-height: 140%;
        letter-spacing: -0.02em;
        color: white;
        text-align: left;
        word-break: keep-all;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        margin: 0;
      }
      .image-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        transition: opacity 0.5s ease-in-out;
        opacity: 1; /* ì´ë¯¸ì§€ íˆ¬ëª…ë„ 1 (ì™„ì „íˆ ë³´ì´ê²Œ) */
        background-size: cover;
        background-position: center;
        pointer-events: none; /* ì˜¤ë²„ë ˆì´ ìì²´ê°€ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ë§‰ì§€ ì•Šë„ë¡ ì„¤ì • */
        background-image: url("1-2.png"); /* 1-2.pngë¥¼ ë°°ê²½ ì´ë¯¸ì§€ë¡œ ì„¤ì • */
        z-index: 999; /* ê°€ì¥ ë†’ì€ ë ˆì´ì–´ì— ìœ„ì¹˜í•˜ë„ë¡ z-indexë¥¼ ë§¤ìš° ë†’ê²Œ ì„¤ì • */
      }
      main {
        text-align: left;
        padding: 20px;
        /* main ìŠ¤íƒ€ì¼ */
        background-color: rgba(114, 114, 114, 0.4);
        backdrop-filter: blur(4px);
        border-radius: 8px; /* 4pxë¡œ ë³€ê²½ */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);

        flex-basis: 40%;
        max-width: 700px;
        display: flex;
        flex-direction: column;
        margin-left: auto;
        position: relative;
        /* ì‚¬ìŠ´ ì»¨í…Œì´ë„ˆ(1003)ë³´ë‹¤ ë‚®ìŒ */
        z-index: 1002;
      }
      #search-container {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: 100%;
        margin-bottom: 20px;
      }
      #urlInput {
        flex-grow: 1;
        height: 24px; /* ë†’ì´ í†µì¼ */
        padding: 12px 15px;
        border: none;
        background-color: rgba(0, 0, 0, 0.4);
        color: white;
        border-radius: 4px; /* 4pxë¡œ ë³€ê²½ */
        font-size: 14px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        margin-right: 20px;
        vertical-align: middle; /* í…ìŠ¤íŠ¸ ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
      }
      #urlInput::placeholder {
        color: #ddd;
      }
      #urlInput:focus {
        outline: none;
      }
      #setInput {
        width: 50px;
        height: 50px;
        border: none;
        background: white;
        border-radius: 50%; /* ì›í˜•ìœ¼ë¡œ ë³€ê²½ */
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease;
      }
      #setInput:hover {
        transform: scale(1.05);
      }
      #setInput img {
        width: 24px;
        height: 24px;
      }

      /* ì˜¤ë””ì˜¤ í† ê¸€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
      #audio-toggle {
        position: fixed; /* body ê¸°ì¤€ìœ¼ë¡œ ê³ ì • */
        top: 24px;
        right: 60px;
        width: 50px;
        height: 50px;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease;
        /* ì‚¬ìŠ´ ì»¨í…Œì´ë„ˆ(1003)ë³´ë‹¤ ë†’ê²Œ ì„¤ì • */
        z-index: 1004;
        background-color: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(4px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      #audio-toggle img {
        width: 24px;
        height: 24px;
        transition: opacity 0.3s;
      }

      #audio-toggle:hover {
        transform: scale(1.05);
      }

      h4 {
        font-size: 24px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        color: white;
        margin: 0 0 20px 0;
        text-align: left;
      }
      h2 {
        font-size: 24px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        color: white;
        margin-top: 16px;
      }
      #carbonList {
        text-align: left;
        width: 100%;
        overflow-y: auto;
        max-height: 250px;
        padding-right: 10px;
        display: flex;
        flex-direction: column;
        gap: 24px;
      }
      .result-item {
        background-color: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(4px);
        color: white;
        padding: 16px 8px;
        border-radius: 4px; /* 4pxë¡œ ë³€ê²½ */
        font-size: 14px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .result-item span:first-child {
        word-break: break-all;
        font-size: 14px;
        font-weight: 500;
      }
      .carbon-result {
        font-size: 20px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        margin-left: 10px;
        white-space: nowrap;
      }
      .total-result-box {
        background-color: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(4px);
        color: white;
        padding: 10px 10px;
        border-radius: 4px; /* 4pxë¡œ ë³€ê²½ */
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        box-sizing: border-box;
      }
      .total-result-box .label {
        font-weight: 500;
        font-size: 18px;
        line-height: 120%;
        letter-spacing: -0.02em;
      }
      .total-result-box .value {
        font-weight: 500;
        font-size: 36px;
        line-height: 120%;
        letter-spacing: -0.02em;
        margin-left: 10px;
        white-space: nowrap;
      }
      hr {
        width: 100%;
        border: 0;
        height: 1px;
        background: rgba(255, 255, 255, 0.3);
        margin: 20px 0;
      }
      footer {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        color: white;
        font-size: 16px;
        font-weight: 400;
        line-height: 120%;
        letter-spacing: -0.02em;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        z-index: 10;
        display: flex;
        /* ì¢Œìš° íŒ¨ë”© 60px í†µì¼ */
        padding: 4px 60px;
        background-color: rgba(0, 0, 0, 0.1);
      }
      footer span {
        flex-grow: 1;
        text-align: left;
      }
      footer span:nth-child(2) {
        text-align: center;
      }
      footer span:last-child {
        text-align: right;
      }
      h3 {
        font-size: 24px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        color: white;
        margin: 40px 0 10px 0;
        text-align: left;
        width: 100%;
      }

      /* ìƒˆë¡œìš´ ë¶€ëª¨ ì»¨í…Œì´ë„ˆ: #comparison-dataì™€ #usage-label-containerë¥¼ ë¬¶ì–´ ê´€ë¦¬ */
      #comparison-wrapper {
        position: fixed;
        bottom: 60px; /* footer ìœ„ì— ìœ„ì¹˜ */
        left: 0;
        width: 100%; /* í™”ë©´ ì „ì²´ ë„ˆë¹„ ì‚¬ìš© */
        padding: 0 60px; /* ì¢Œìš° 60px ë§ˆì§„ì²˜ëŸ¼ ë³´ì´ë„ë¡ íŒ¨ë”© ì ìš© */
        box-sizing: border-box;
        z-index: 1002; /* mainê³¼ ë™ì¼í•˜ê²Œ 1002ë¡œ ì„¤ì • */
      }

      /* ìµœì¢… ìˆ˜ì •ëœ ë¹„êµ ë°ì´í„° ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
      #comparison-data {
        position: relative;
        margin: 0;
        width: 100%; /* ë¶€ëª¨ wrapperì˜ ë„ˆë¹„ë¥¼ ê½‰ ì±„ì›€ */

        padding: 20px 24px; /* ë‚´ë¶€ íŒ¨ë”© (ì‚¬ìš©ì ì œê³µ CSS ìœ ì§€) */
        box-sizing: border-box;

        background-color: rgba(114, 114, 114, 0.4);
        backdrop-filter: blur(4px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* ì•„ë˜ìª½ ê·¸ë¦¼ìì—ì„œ ìœ„ìª½ìœ¼ë¡œ ë³€ê²½ */

        display: flex;
        justify-content: space-between; /* 4ê°œ í•­ëª©ì„ ê°€ë¡œë¡œ ë°°ì¹˜ */
        align-items: center; /* ì•„ì´í…œ ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
        gap: 20px;
        border-radius: 8px;
      }

      /* '1ë…„ ì‚¬ìš©ì‹œ' ë°•ìŠ¤ ìŠ¤íƒ€ì¼ (ë¶€ëª¨ wrapper ê¸°ì¤€ ìœ„ì¹˜ ì¡°ì •) */
      #usage-label-container {
        position: relative; /* ë¶€ëª¨ wrapper ê¸°ì¤€ìœ¼ë¡œ ìƒëŒ€ì  ë°°ì¹˜ */
        margin-bottom: 8px; /* comparison-dataì™€ì˜ ê°„ê²© */
        width: 100%;
        display: flex; /* ë‚´ë¶€ ìš”ì†Œ ì •ë ¬ì„ ìœ„í•´ flex ì‚¬ìš© */
        align-items: center;
      }

      #usage-text {
        display: inline-block;
        padding: 10px 20px;
        background-color: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(12px);
        border-radius: 8px;
        color: white;
        font-size: 24px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        /* comparison-data ë°•ìŠ¤ì˜ ë‚´ë¶€ íŒ¨ë”©(24px)ë§Œí¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•˜ì—¬ ì •ë ¬ */
        margin-right: 12px; /* ë²„íŠ¼ê³¼ì˜ ê°„ê²© */
      }

      /* ë…„ë„ ì¡°ì ˆ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
      #usage-control {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      /* ë…„ë„ ì¡°ì ˆ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
      .usage-button {
        width: 20px;
        height: 20px;
        background-color: rgba(0, 0, 0, 0.8);
        border: none;
        color: white;
        font-size: 10px;
        font-weight: 700;
        line-height: 1;
        cursor: pointer;
        border-radius: 2px;
        transition: background 0.2s;
        padding: 0;
      }
      .usage-button:hover {
        background: rgba(255, 255, 255, 0.4);
      }

      /* ğŸ¦Œ ì‚¬ìŠ´ ë‘ë”ì§€ ê²Œì„ ìš”ì†Œ ìŠ¤íƒ€ì¼ */
      #deer-game-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        /* ì‚¬ìŠ´ì´ ì—†ëŠ” ì˜ì—­ì€ í´ë¦­ì„ ì•„ë˜ë¡œ í†µê³¼ì‹œí‚¤ê³ , ì‚¬ìŠ´ ìš”ì†Œë§Œ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ í•¨ */
        pointer-events: none;
        /* === ìˆ˜ì •: ëª¨ë“  UI ìœ„ (main, comparison-wrapperì˜ z-index 1002ë³´ë‹¤ ë†’ê²Œ) === */
        z-index: 1003;
      }

      .deer {
        position: absolute;
        /* === ì‚¬ìŠ´ í¬ê¸° 2.5ë°° (250px) === */
        width: 250px;
        height: 250px;
        cursor: pointer;
        pointer-events: none; /* ì‚¬ìŠ´ì´ ì—†ëŠ” ì˜ì—­ì€ í´ë¦­ ë¬´ì‹œ */
        opacity: 0;
        transition: opacity 0.3s ease-out, transform 0.3s ease-out; /* ë“±ì¥/í‡´ì¥ ì• ë‹ˆë©”ì´ì…˜ */
      }

      .deer.active {
        pointer-events: auto; /* í™œì„±í™”ëœ ì‚¬ìŠ´ë§Œ í´ë¦­ ê°€ëŠ¥ */
        opacity: 1; /* ë“±ì¥ ìƒíƒœ */
      }

      /* ğŸ¦Œ deer ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
      .deer.side,
      .deer.vertical {
        background-size: contain;
        background-repeat: no-repeat;
      }

      /* ìƒí•˜ ì œê±° */
      .deer.vertical {
        display: none;
      }

      /* ë°©í–¥ë³„ ì´ˆê¸° ìœ„ì¹˜ ì„¤ì • ë° ë³€í™˜ */
      /* ì¢Œì¸¡ì—ì„œ ë‚˜ì˜´ */
      /* JSì—ì„œ left: -250px; ì„¤ì • */
      .deer.left {
      }
      /* ìš°ì¸¡ì—ì„œ ë‚˜ì˜´ (ì¢Œìš° ë°˜ì „) */
      /* JSì—ì„œ right: -250px; ì„¤ì • */
      .deer.right {
        transform: scaleX(-1);
      }
      /* ìƒë‹¨/í•˜ë‹¨ ì œê±° */
      .deer.top,
      .deer.bottom {
        display: none;
      }

      .comparison-item {
        display: flex;
        flex-direction: row; /* ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ë¥¼ ê°€ë¡œë¡œ ë°°ì¹˜ */
        align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
        flex: 1; /* ê°€ë¡œ ê³µê°„ ê· ë“± ë¶„ë°° */
        text-align: left; /* í…ìŠ¤íŠ¸ ì •ë ¬ */
      }

      .comparison-icon-container {
        width: 80px;
        height: 80px;
        border-radius: 4px;
        display: flex;
        align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
        justify-content: center;
        background-color: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(4px);
        margin-right: 15px; /* í…ìŠ¤íŠ¸ì™€ì˜ ê°„ê²© */
        flex-shrink: 0;
      }

      .comparison-icon-container img {
        width: 60px;
        height: 60px;
      }

      .comparison-text-block {
        display: flex;
        flex-direction: column;
        align-items: flex-start; /* í…ìŠ¤íŠ¸ ì™¼ìª½ ì •ë ¬ */
        justify-content: center;
        color: white;
        width: 100%;
      }

      .comparison-title {
        /* ì›¹ì‚¬ì´íŠ¸ê°€ ë°°ì¶œí•˜ëŠ” íƒ„ì†ŒëŸ‰ (h2)ê³¼ ë™ì¼í•œ í°íŠ¸ ìŠ¤íƒ€ì¼ */
        font-size: 24px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        margin: 0;
        word-break: keep-all;
      }

      .comparison-description {
        /* ì›¹ì‚¬ì´íŠ¸ íƒ„ì†ŒëŸ‰ ê²°ê³¼ê°’ (carbon-result)ê³¼ ë™ì¼í•œ í°íŠ¸ ìŠ¤íƒ€ì¼ */
        font-size: 14px;
        font-weight: 500;
        line-height: 120%;
        letter-spacing: -0.02em;
        margin-top: 8px;
        color: #ddd; /* ì„¤ëª… í…ìŠ¤íŠ¸ëŠ” ì¡°ê¸ˆ ë” ì—°í•˜ê²Œ */
        word-break: keep-all;
      }
    </style>
  </head>
  <body>
    <button id="audio-toggle">
      <img id="audio-icon" src="sound.png" alt="Toggle Sound" />
    </button>

    <div id="deer-game-container"></div>

    <div class="container">
      <div class="title-container">
        <p class="title-text">FOREST<br />BEHIND<br />MY SCREEN</p>
        <p class="title-description">
          ìš°ë¦¬ê°€ ë¬´ì‹¬ì½” ì†Œë¹„í•˜ëŠ” ì¸í„°ë„·ì€ ë³´ì´ì§€ ì•ŠëŠ” ì—ë„ˆì§€ë¥¼ ì“°ê³ , <br />
          ê·¸ ì—ë„ˆì§€ëŠ” ì‹¤ì œë¡œ ìˆ²ì„ ì‚¬ë¼ì§€ê²Œ ë§Œë“­ë‹ˆë‹¤. ì´ ì‚¬ì´íŠ¸ëŠ” <br />ë‹¹ì‹ ì´
          ì¼ìƒì ìœ¼ë¡œ ë°©ë¬¸í•˜ëŠ” ì›¹ì‚¬ì´íŠ¸ë“¤ì´ í™”ë©´ ë’¤ì˜ ìˆ²ì„ <br />ì–¼ë§ˆë‚˜ íŒŒê´´í•˜ê³ 
          ìˆëŠ”ì§€ ë³´ì—¬ì¤ë‹ˆë‹¤.
        </p>
      </div>

      <main>
        <h4>ë‹¹ì‹ ì´ ìì£¼ ë°©ë¬¸í•˜ëŠ” ì›¹ì‚¬ì´íŠ¸ë“¤ì„ ì…ë ¥í•˜ì„¸ìš”.</h4>
        <div id="search-container">
          <input id="urlInput" type="url" placeholder="URL" />
          <button id="setInput">
            <img src="search.png" alt="Search" />
          </button>
        </div>

        <h2>ì›¹ì‚¬ì´íŠ¸ê°€ ë°°ì¶œí•˜ëŠ” íƒ„ì†ŒëŸ‰</h2>
        <div id="carbonList"></div>
        <h3>ëˆ„ì  íƒ„ì†Œ ë°°ì¶œëŸ‰</h3>
        <div id="totalCarbon"></div>
      </main>
    </div>

    <div class="image-overlay"></div>

    <div id="comparison-wrapper">
      <div id="usage-label-container">
        <span id="usage-text">1ë…„ ì‚¬ìš©ì‹œ</span>
        <div id="usage-control">
          <button class="usage-button" id="increase-year">â–²</button>
          <button class="usage-button" id="decrease-year">â–¼</button>
        </div>
      </div>
      <div id="comparison-data"></div>
    </div>

    <footer>
      <span>2025-2 Web Interaction Midterm Project</span>
      <span style="text-align: center">jasonjeong@seoultech.ac.kr</span>
      <span style="text-align: right"
        >Copyright Â© 2025 JaeHyun Jeong. All rights reserved.</span
      >
    </footer>

    <audio id="backgroundAudio" src="1.mp3" loop></audio>

    <script>
      // proxy Urlì€ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ, ê°„ë‹¨íˆ ë§í•˜ë©´ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì— ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆë„ë¡ ìš°íšŒí•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì£¼ì†Œ
      const proxyUrl = "https://corsproxy.io/?";
      // API í‚¤ëŠ” ë³´ì•ˆìƒ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì„œë²„ ì¸¡ì— ë³´ê´€í•´ì•¼ í•©ë‹ˆë‹¤.
      const apiKey = "AIzaSyAO-LxIj-DTJ7hGxeQqQ9E9fvMIH2h18hU";

      // ë“±ê¸‰ë³„ CO2 ê¸°ì¤€ ìˆ˜ì¹˜ (g)
      const ratingTiers = {
        A_plus: 0.04,
        A: 0.079,
        B: 0.145,
        C: 0.209,
        D: 0.278,
        E: 0.359,
        F: 0.36,
      };

      // ------------------------------------------------------------------------
      // ëˆ„ì  íƒ„ì†Œ ë°°ì¶œëŸ‰ì„ ì¼ìƒì ì¸ ìˆ˜ì¹˜ë¡œ í™˜ì‚°í•˜ëŠ” ìƒìˆ˜ (1ë…„ ì‚¬ìš© ê¸°ì¤€)

      // 1ë…„ ì´ ì‚¬ìš©ëŸ‰ ê¸°ì¤€: ì´ ëˆ„ì  íƒ„ì†Œ ë°°ì¶œëŸ‰(g) * 365
      const G_TO_KG_FACTOR = 1000;

      const SCOOTER_CO2_G_PER_KM_MIN = 8;
      const SCOOTER_CO2_G_PER_KM_MAX = 12;
      const AVERAGE_SCOOTER_CO2_G_PER_KM =
        (SCOOTER_CO2_G_PER_KM_MIN + SCOOTER_CO2_G_PER_KM_MAX) / 2; // 10 g/km

      const TRAIN_CO2_G_PER_KM = 20;

      const CAR_CO2_G_PER_KM_MIN = 120;
      const CAR_CO2_G_PER_KM_MAX = 180;
      const AVERAGE_CAR_CO2_G_PER_KM =
        (CAR_CO2_G_PER_KM_MIN + CAR_CO2_G_PER_KM_MAX) / 2; // 150 g/km

      const AIRPLANE_CO2_G_PER_KM = 255; // 1ì¸ë‹¹ (g)

      // ------------------------------------------------------------------------

      // UI ìš”ì†Œ
      const urlInput = document.getElementById("urlInput");
      const setInput = document.getElementById("setInput");
      const usageText = document.getElementById("usage-text");
      const increaseButton = document.getElementById("increase-year");
      const decreaseButton = document.getElementById("decrease-year");
      const carbonList = document.getElementById("carbonList");
      const totalCarbon = document.getElementById("totalCarbon");
      const comparisonData = document.getElementById("comparison-data");
      const backgroundAudio = document.getElementById("backgroundAudio");
      const audioToggle = document.getElementById("audio-toggle");
      const audioIcon = document.getElementById("audio-icon");
      const imageOverlay = document.querySelector(".image-overlay");
      const deerGameContainer = document.getElementById("deer-game-container");

      // ìƒíƒœ ë³€ìˆ˜
      let targetUrl = "";
      let totalCarbonAmount = 0; // 1íšŒ ë°©ë¬¸ ê¸°ì¤€ ëˆ„ì  íƒ„ì†ŒëŸ‰ (g)
      let websiteCount = 0;
      let annualMultiplier = 1; // ì‚¬ìš© ì—°ë„ (ìµœì†Œ 1, ìµœëŒ€ 50)
      let isAudioPlaying = false;
      const MAX_YEARS = 50;
      const MIN_YEARS = 1;

      // ì‚¬ìŠ´ ê²Œì„ ê´€ë ¨ ë³€ìˆ˜
      let deerTimer;
      let deerElements = [];
      const DEER_SIZE = 250; // === ì‚¬ìŠ´ í¬ê¸° 2.5ë°° (250px) ===
      const DEER_DURATION = 2500; // ì‚¬ìŠ´ì´ ë‚˜íƒ€ë‚¬ë‹¤ê°€ ì‚¬ë¼ì§€ëŠ” ì‹œê°„ (ms) - ì²´ë¥˜ ì‹œê°„
      const DEER_APPEAR_INTERVAL = 3000; // ì‚¬ìŠ´ì´ ë‚˜íƒ€ë‚˜ëŠ” ì‹œê°„ ê°„ê²© (ms) - ë¹ˆë„

      // ì‚¬ìŠ´ì´ ë“±ì¥í•  ìœ„ì¹˜ ì •ì˜ (ì¢Œìš° 4ê°œë§Œ ì‚¬ìš©)
      const DEER_SPOTS = [
        { x: "0%", y: "30%", dir: "left", edge: "left" },
        { x: "0%", y: "60%", dir: "left", edge: "left" },
        { x: "100%", y: "40%", dir: "right", edge: "right" },
        { x: "100%", y: "70%", dir: "right", edge: "right" },
      ];

      // ------------------------------------------------------------------------
      // ì‚¬ìŠ´ ë‘ë”ì§€ ê²Œì„ ë¡œì§

      function createDeerElements() {
        // DEER_SPOTS ìˆ˜ì— ë§ì¶° ìš”ì†Œ ìƒì„±
        for (let i = 0; i < DEER_SPOTS.length; i++) {
          const deer = document.createElement("div");
          deer.classList.add("deer");

          // í´ë¦­ ì‹œ ì‚¬ë¼ì§€ê²Œ í•˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
          deer.addEventListener("click", function () {
            hideDeer(deer);
            if (deer.onDeerHide) deer.onDeerHide(); // ìŠ¤íŒŸ ì¬í™œì„±í™” ë¡œì§ í˜¸ì¶œ
          });
          deerElements.push(deer);
          deerGameContainer.appendChild(deer);
        }
      }

      function getActiveTransform(spot) {
        // deer1.pngë§Œ ì‚¬ìš©
        if (spot.edge === "left") return `translateX(${DEER_SIZE}px)`;
        if (spot.edge === "right")
          return `translateX(-${DEER_SIZE}px) scaleX(-1)`;
        return "";
      }

      function showDeer(deer, spot) {
        // ì´ˆê¸° ìœ„ì¹˜ ì„¤ì •
        deer.style.left = spot.edge === "left" ? `-${DEER_SIZE}px` : spot.x;
        deer.style.top = spot.y;
        deer.style.right = spot.edge === "right" ? `-${DEER_SIZE}px` : ""; // right: 0%ê°€ ì•„ë‹ˆë¼ -250pxì—ì„œ ì‹œì‘
        deer.style.bottom = spot.edge === "bottom" ? "0" : "";

        // ëœë¤ ì‚¬ìŠ´ ì´ë¯¸ì§€ ì„ íƒ (deer1.png ~ deer4.png)
        const randomDeerNum = Math.floor(Math.random() * 4) + 1;
        deer.style.backgroundImage = `url('deer${randomDeerNum}.png')`;

        // CSS í´ë˜ìŠ¤ ì„¤ì • (ì¢Œìš°ì¸ sideë§Œ ì‚¬ìš©)
        deer.className = `deer ${spot.dir} side`;

        // 1. ì´ˆê¸° ìœ„ì¹˜ (í™”ë©´ ë°–) ì„¤ì •: CSSê°€ íŠ¸ëœì§€ì…˜ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì ìš©
        if (spot.edge === "left")
          deer.style.transform = `translateX(0)`; // left:-250pxì—ì„œ ì‹œì‘í•˜ë¯€ë¡œ transformì€ 0ìœ¼ë¡œ
        else if (spot.edge === "right")
          deer.style.transform = `translateX(0) scaleX(-1)`; // right:-250pxì—ì„œ ì‹œì‘í•˜ë¯€ë¡œ transformì€ 0ìœ¼ë¡œ

        // requestAnimationFrameì„ ì‚¬ìš©í•˜ì—¬ CSS íŠ¸ëœì§€ì…˜ ê°•ì œ ì ìš©
        requestAnimationFrame(() => {
          // 2. í™œì„±í™” í´ë˜ìŠ¤ ì¶”ê°€ ë° ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ (í™”ë©´ ì•ˆìœ¼ë¡œ ì´ë™)
          deer.classList.add("active");
          deer.style.transform = getActiveTransform(spot);
        });

        // ì¼ì • ì‹œê°„ í›„ ìë™ìœ¼ë¡œ ì‚¬ë¼ì§€ë„ë¡ ì„¤ì •
        deer.timeout = setTimeout(() => {
          hideDeer(deer);
          if (deer.onDeerHide) deer.onDeerHide(); // íƒ€ì„ì•„ì›ƒ ì‹œ ìŠ¤íŒŸ ì¬í™œì„±í™”
        }, DEER_DURATION);
      }

      function hideDeer(deer) {
        clearTimeout(deer.timeout); // ìë™ í‡´ì¥ íƒ€ì´ë¨¸ ì·¨ì†Œ

        // 1. í‡´ì¥ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ (í™”ë©´ ë°–ìœ¼ë¡œ ë³µê·€)
        deer.classList.remove("active");

        // íŠ¸ëœì§€ì…˜ ë³µê·€ (í™”ë©´ ë°–ìœ¼ë¡œ ì´ë™)
        if (deer.classList.contains("left"))
          deer.style.transform = `translateX(0)`; // left:-250pxìœ¼ë¡œ ë³µê·€ (ìˆ¨ê¹€)
        else if (deer.classList.contains("right"))
          deer.style.transform = `translateX(0) scaleX(-1)`; // right:-250pxìœ¼ë¡œ ë³µê·€ (ìˆ¨ê¹€)

        // 2. íŠ¸ëœì§€ì…˜ ì™„ë£Œ í›„ í´ë˜ìŠ¤ ì œê±° ë° ìœ„ì¹˜ ë¦¬ì…‹ (ë‹¤ìŒ ìŠ¤í°ì„ ìœ„í•´)
        setTimeout(() => {
          deer.className = "deer"; // ëª¨ë“  í´ë˜ìŠ¤ ì œê±° (ê¸°ë³¸ deer í´ë˜ìŠ¤ë§Œ ë‚¨ê¹€)
          deer.style.left = "";
          deer.style.right = "";
          deer.style.top = "";
          deer.style.bottom = "";
          deer.style.transform = "";
        }, 350); // transition ì‹œê°„(0.3s)ë³´ë‹¤ ê¸¸ê²Œ ì„¤ì •
      }

      let availableSpots = [...DEER_SPOTS]; // ì „ì—­ìœ¼ë¡œ ê´€ë¦¬

      function startDeerGame() {
        // ê²Œì„ í™œì„±í™” ì „ ëª¨ë“  ì‚¬ìŠ´ ìš”ì†Œ ì¤€ë¹„
        if (deerElements.length === 0) createDeerElements();
        deerElements.forEach((d) => {
          clearTimeout(d.timeout);
          d.className = "deer";
          d.style.transform = "";
          d.currentSpot = null;
          d.onDeerHide = null;
        });

        // ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤íŒŸ ë¦¬ì…‹
        availableSpots = [...DEER_SPOTS];

        function spawnDeer() {
          let availableDeer = deerElements.filter(
            (d) => !d.classList.contains("active")
          );

          // ì‚¬ìŠ´ì´ ë‚˜íƒ€ë‚˜ì§€ ì•Šì•„ì•¼ í•  ìƒí™© ì²´í¬
          if (availableDeer.length === 0 || availableSpots.length === 0) {
            return;
          }

          // ì‚¬ìš© ê°€ëŠ¥í•œ ì‚¬ìŠ´ê³¼ ìŠ¤íŒŸì„ ë¬´ì‘ìœ„ë¡œ ì„ íƒ
          const deerIndex = Math.floor(Math.random() * availableDeer.length);
          const spotIndex = Math.floor(Math.random() * availableSpots.length);

          const deer = availableDeer[deerIndex];
          const spot = availableSpots.splice(spotIndex, 1)[0]; // ì‚¬ìš© ì¤‘ì¸ ìŠ¤íŒŸì€ ì„ì‹œ ì œê±°

          showDeer(deer, spot);

          // ì‚¬ìŠ´ì—ê²Œ ìŠ¤íŒŸ ì •ë³´ ì €ì¥
          deer.currentSpot = spot;

          // ì‚¬ìŠ´ì´ ìˆ¨ê²¨ì§ˆ ë•Œ (í´ë¦­ ë˜ëŠ” íƒ€ì„ì•„ì›ƒ) ìŠ¤íŒŸ ì¬í™œì„±í™”
          deer.onDeerHide = function () {
            if (deer.currentSpot) {
              availableSpots.push(deer.currentSpot); // ìŠ¤íŒŸ ì¬í™œì„±í™”
              deer.currentSpot = null;
            }
            deer.onDeerHide = null;
          };
        }

        // ê²Œì„ íƒ€ì´ë¨¸ ì‹œì‘
        deerTimer = setInterval(spawnDeer, DEER_APPEAR_INTERVAL);
      }

      function stopDeerGame() {
        if (deerTimer) {
          clearInterval(deerTimer);
          deerTimer = null;
        }

        // ëª¨ë“  ì‚¬ìŠ´ ìš”ì†Œ ì¦‰ì‹œ ì œê±°
        deerElements.forEach((deer) => {
          clearTimeout(deer.timeout);
          deer.remove();
        });
        deerElements = []; // ë°°ì—´ ì´ˆê¸°í™”
        availableSpots = [...DEER_SPOTS]; // ìŠ¤íŒŸ ì´ˆê¸°í™”
      }

      // ------------------------------------------------------------------------

      // ì´ˆê¸° UIë¥¼ ê·¸ë¦¬ëŠ” í•¨ìˆ˜
      function initializeUI() {
        // carbonListì— ì´ˆê¸° ë°•ìŠ¤ ì¶”ê°€
        const initialCarbonItem = document.createElement("div");
        initialCarbonItem.classList.add("result-item");
        initialCarbonItem.id = "initial-result";
        initialCarbonItem.innerHTML = `<span class="carbon-result">0.00 g</span><span></span>`;
        carbonList.appendChild(initialCarbonItem);

        // totalCarbonì— ì´ˆê¸° ë°•ìŠ¤ ì¶”ê°€
        const initialTotalBox = document.createElement("div");
        initialTotalBox.classList.add("total-result-box");
        initialTotalBox.id = "initial-total";
        initialTotalBox.innerHTML = `<span class="value">0.00 g</span>`;
        totalCarbon.appendChild(initialTotalBox);

        // comparison-dataì— ì´ˆê¸° ë°•ìŠ¤ ì¶”ê°€ (ë‚´ìš©ì€ 0ìœ¼ë¡œ ì±„ì›Œì§)
        comparisonData.innerHTML = `
					<div class="comparison-item">
						<div class="comparison-icon-container">
							<img src="icon2.png" alt="Electric Scooter" />
						</div>
						<div class="comparison-text-block">
							<p class="comparison-title">ì „ë™í‚¥ë³´ë“œ 0 km ì£¼í–‰</p>
							<p class="comparison-description">1kmë‹¹ COâ‚‚ ì•½ 8 ~ 12 g</p>
						</div>
					</div>
					<div class="comparison-item">
						<div class="comparison-icon-container">
							<img src="icon1.png" alt="Train" />
						</div>
						<div class="comparison-text-block">
							<p class="comparison-title">ê¸°ì°¨ 0 km ì£¼í–‰</p>
							<p class="comparison-description">1kmë‹¹ COâ‚‚ ì•½ 20g (1ì¸ë‹¹)</p>
						</div>
					</div>
					<div class="comparison-item">
						<div class="comparison-icon-container">
							<img src="icon3.png" alt="Car" />
						</div>
						<div class="comparison-text-block">
							<p class="comparison-title">ìë™ì°¨ 0 km ì£¼í–‰</p>
							<p class="comparison-description">ì¤‘í˜•ì°¨ 1kmë‹¹ COâ‚‚ ì•½ 120~180g</p>
						</div>
					</div>
					<div class="comparison-item">
						<div class="comparison-icon-container">
							<img src="icon4.png" alt="Airplane" />
						</div>
						<div class="comparison-text-block">
							<p class="comparison-title">ë¹„í–‰ê¸° 0 km ë¹„í–‰</p>
							<p class="comparison-description">1kmë‹¹ COâ‚‚ ì•½ 255 g (1ì¸ë‹¹)</p>
						</div>
					</div>
				`;

        // ì—°ë„ UI ì´ˆê¸°í™”
        annualMultiplier = MIN_YEARS;
        updateYearUI();

        // **í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜¤ë””ì˜¤ ìë™ ì¬ìƒ ì‹œë„**
        backgroundAudio
          .play()
          .then(() => {
            isAudioPlaying = true;
            audioIcon.style.opacity = 1;
          })
          .catch((e) => {
            console.error("Audio playback blocked:", e);
            isAudioPlaying = false;
            audioIcon.style.opacity = 0.3;
          });
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° UI ê·¸ë¦¬ê¸°
      document.addEventListener("DOMContentLoaded", initializeUI);

      // ------------------------------------------------------------------------
      // input ë¨¼ì € ë°›ì•„ì„œ ë¬¸ìì—´ ê°€ê³µí•˜ê¸°
      urlInput.oninput = function () {
        targetUrl = urlInput.value;
      };

      // ------------------------------------------------------------------------
      // ì˜¤ë””ì˜¤ ì œì–´ í•¨ìˆ˜
      function toggleAudio() {
        if (backgroundAudio.paused) {
          backgroundAudio
            .play()
            .then(() => {
              isAudioPlaying = true;
              audioIcon.style.opacity = 1;
            })
            .catch((e) => {
              console.error("Audio playback failed:", e);
            });
        } else {
          backgroundAudio.pause();
          isAudioPlaying = false;
          audioIcon.style.opacity = 0.3;
        }
      }

      audioToggle.onclick = toggleAudio;

      // ------------------------------------------------------------------------
      // ì—°ë„ UI ë° ê³„ì‚° ë¡œì§ ì—…ë°ì´íŠ¸
      function updateYearUI() {
        usageText.textContent = `${annualMultiplier}ë…„ ì‚¬ìš©ì‹œ`;
        updateComparisonData();
      }

      // ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
      increaseButton.onclick = function () {
        if (annualMultiplier < MAX_YEARS) {
          annualMultiplier++;
          updateYearUI();
        }
      };

      decreaseButton.onclick = function () {
        if (annualMultiplier > MIN_YEARS) {
          annualMultiplier--;
          updateYearUI();
        }
      };

      // ------------------------------------------------------------------------
      // ëˆ„ì  íƒ„ì†Œ ë°°ì¶œëŸ‰ì„ ê¸°ë°˜ìœ¼ë¡œ ë¹„êµ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
      function updateComparisonData() {
        const totalAnnualCarbonGrams =
          totalCarbonAmount * 365 * annualMultiplier;

        // ê³„ì‚°
        const scooterDistanceKM =
          totalAnnualCarbonGrams / AVERAGE_SCOOTER_CO2_G_PER_KM;
        const trainDistanceKM = totalAnnualCarbonGrams / TRAIN_CO2_G_PER_KM;
        const carDistanceKM = totalAnnualCarbonGrams / AVERAGE_CAR_CO2_G_PER_KM;
        const airplaneDistanceKM =
          totalAnnualCarbonGrams / AIRPLANE_CO2_G_PER_KM;

        // HTML ë¬¸ìì—´ ìƒì„± (ìˆœì„œ: í‚¥ë³´ë“œ -> ê¸°ì°¨ -> ìë™ì°¨ -> ë¹„í–‰ê¸°)
        comparisonData.innerHTML = `
					<div class="comparison-item">
						<div class="comparison-icon-container">
							<img src="icon2.png" alt="Electric Scooter" />
						</div>
						<div class="comparison-text-block">
							<p class="comparison-title">ì „ë™í‚¥ë³´ë“œ ${Math.round(
                scooterDistanceKM
              )} km ì£¼í–‰</p>
							<p class="comparison-description">1kmë‹¹ COâ‚‚ ì•½ 8 ~ 12 g</p>
						</div>
					</div>
					<div class="comparison-item">
						<div class="comparison-icon-container">
							<img src="icon1.png" alt="Train" />
						</div>
						<div class="comparison-text-block">
							<p class="comparison-title">ê¸°ì°¨ ${Math.round(trainDistanceKM)} km ì£¼í–‰</p>
							<p class="comparison-description">1kmë‹¹ COâ‚‚ ì•½ 20g (1ì¸ë‹¹)</p>
						</div>
					</div>
					<div class="comparison-item">
						<div class="comparison-icon-container">
							<img src="icon3.png" alt="Car" />
						</div>
						<div class="comparison-text-block">
							<p class="comparison-title">ìë™ì°¨ ${Math.round(carDistanceKM)} km ì£¼í–‰</p>
							<p class="comparison-description">ì¤‘í˜•ì°¨ 1kmë‹¹ COâ‚‚ ì•½ 120~180g</p>
						</div>
					</div>
					<div class="comparison-item">
						<div class="comparison-icon-container">
							<img src="icon4.png" alt="Airplane" />
						</div>
						<div class="comparison-text-block">
							<p class="comparison-title">ë¹„í–‰ê¸° ${Math.round(airplaneDistanceKM)} km ë¹„í–‰</p>
							<p class="comparison-description">1kmë‹¹ COâ‚‚ ì•½ 255 g (1ì¸ë‹¹)</p>
						</div>
					</div>
				`;

        // ì´ ëˆ„ì  í‘œì‹œ ì—…ë°ì´íŠ¸ (1íšŒ ë°©ë¬¸ ê¸°ì¤€ í•©ì‚°ë§Œ í‘œì‹œ)
        totalCarbon.innerHTML = `
					<div class="total-result-box">
						<span class="value">${totalCarbonAmount.toFixed(2)} g</span>
					</div>
				`;
      }

      // ------------------------------------------------------------------------
      // ìš”ì²­ì„ ì‹¤ì œë¡œ ë³´ë‚´ëŠ” ì˜ì—­

      setInput.onclick = function (e) {
        // ë²„íŠ¼ì˜ ê¸°ë³¸ ë™ì‘ ë°©ì§€ (ë§Œì¼ì˜ ê²½ìš° í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë°©ì§€)
        e.preventDefault();

        if (!targetUrl) {
          alert("URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
          // URLì´ ì—†ìœ¼ë©´ ì—¬ê¸°ì„œ ë¡œì§ ì¢…ë£Œ
          return;
        }

        // ğŸ¦Œ ì‚¬ìŠ´ ê²Œì„ ì‹œì‘! (ê³„ì‚° ì¤‘ ìƒíƒœ ì‹œì‘)
        startDeerGame();

        let fullUrl = targetUrl;
        if (!fullUrl.startsWith("http://") && !fullUrl.startsWith("https://")) {
          fullUrl = "https://" + fullUrl;
        }

        const greenHostname = fullUrl
          .replace(/^(https?:\/\/)?(www\.)?/, "")
          .split("/")[0];
        const greenCheckUrl = `https://api.thegreenwebfoundation.org/api/v3/greencheck/${greenHostname}`;
        const pageSpeedUrl = `https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=${encodeURIComponent(
          fullUrl
        )}&key=${apiKey}&strategy=desktop`;

        const initialResultBox = document.getElementById("initial-result");
        if (initialResultBox) {
          initialResultBox.remove();
        }

        const resultDiv = document.createElement("div");
        resultDiv.classList.add("result-item");
        resultDiv.innerHTML = `<span class="carbon-result">ê³„ì‚° ì¤‘...</span><span>${fullUrl}</span>`;
        carbonList.appendChild(resultDiv);

        Promise.all([
          fetch(greenCheckUrl)
            .then((response) => {
              if (!response.ok) {
                throw new Error(
                  `Green Check API error! Status: ${response.status}`
                );
              }
              return response.json();
            })
            .then((data) => data.green)
            .catch((error) => {
              console.error("Green Check API Error:", error);
              return false;
            }),

          fetch(pageSpeedUrl)
            .then((response) => response.json())
            .then((data) => {
              if (data.error) {
                throw new Error(`PageSpeed API Error: ${data.error.message}`);
              }
              const pageSize =
                data.lighthouseResult?.audits["total-byte-weight"]
                  ?.numericValue;
              if (pageSize === undefined) {
                throw new Error(
                  "Could not find total page size in API response."
                );
              }
              return pageSize;
            })
            .catch((error) => {
              console.error("PageSpeed API Error:", error);
              return 0;
            }),
        ])
          .then(([isGreen, pageSize]) => {
            // ğŸ¦Œ ë¡œë”© ì™„ë£Œ! ì‚¬ìŠ´ ê²Œì„ ì¤‘ì§€
            stopDeerGame();

            const greenValue = isGreen ? 1 : 0;
            const carbonApiUrl = `https://api.websitecarbon.com/data?bytes=${pageSize}&green=${greenValue}`;

            return fetch(proxyUrl + carbonApiUrl);
          })
          .then((response) => {
            if (!response.ok) {
              throw new Error(
                `Carbon API fetch failed: ${response.statusText}`
              );
            }
            return response.json();
          })
          .then((carbonData) => {
            const carbonGrams = carbonData["gco2e"];
            const rating = carbonData["rating"];

            websiteCount++;
            totalCarbonAmount += carbonGrams;

            const carbonResultSpan = resultDiv.querySelector(".carbon-result");
            carbonResultSpan.textContent = `${carbonGrams.toFixed(2)} g`;
            const urlSpan = resultDiv.querySelector("span:last-of-type");
            urlSpan.textContent = fullUrl;

            updateEffectByTotalCarbon();
            updateComparisonData();
          })
          .catch((error) => {
            // ğŸ¦Œ ë¡œë”© ì‹¤íŒ¨ ì‹œì—ë„ ì‚¬ìŠ´ ê²Œì„ ì¤‘ì§€ ë° ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
            stopDeerGame();

            console.error("An error occurred:", error);
            const carbonResultSpan = resultDiv.querySelector(".carbon-result");
            carbonResultSpan.textContent = `ê³„ì‚° ì‹¤íŒ¨`;
          });
      };

      // ëˆ„ì  CO2 ë°°ì¶œëŸ‰ì— ë”°ë¼ íš¨ê³¼ë¥¼ ë³€ê²½í•˜ëŠ” ìƒˆë¡œìš´ í•¨ìˆ˜
      function updateEffectByTotalCarbon() {
        const currentMultiplier = websiteCount < 5 ? 5 : websiteCount;

        const A_plus_limit = ratingTiers.A_plus * currentMultiplier;
        const C_limit = ratingTiers.C * currentMultiplier;
        const F_limit = ratingTiers.F * currentMultiplier;

        if (totalCarbonAmount < A_plus_limit) {
          document.body.style.backgroundImage = `url('1.jpg')`;
          imageOverlay.style.backgroundImage = `url('1-2.png')`;
          imageOverlay.style.opacity = "1";
          backgroundAudio.volume = 1.0;
        } else if (totalCarbonAmount < C_limit) {
          document.body.style.backgroundImage = `url('2.jpg')`;
          imageOverlay.style.backgroundImage = `url('2-2.png')`;
          imageOverlay.style.opacity = "1";
          backgroundAudio.volume = 0.7;
        } else if (totalCarbonAmount < F_limit) {
          document.body.style.backgroundImage = `url('3.jpg')`;
          imageOverlay.style.backgroundImage = `url('3-2.png')`;
          imageOverlay.style.opacity = "1";
          backgroundAudio.volume = 0.3;
        } else {
          document.body.style.backgroundImage = `url('4.jpg')`;
          imageOverlay.style.backgroundImage = `url('4-2.png')`;
          imageOverlay.style.opacity = "1";
          backgroundAudio.volume = 0.0;
        }
      }
    </script>
  </body>
</html>
